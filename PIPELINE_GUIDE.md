# Jenkins CI/CD Pipeline Guide üöÄ

This document explains the structure and principles of the Jenkins Pipeline (Jenkinsfile) implemented for the **Todo Spring React** project.

## 1. Pipeline Structure Overview

The pipeline is written using **Declarative Syntax**, which is the modern standard for Jenkins. It is structured into several key sections:

### A. Parameters & Environment
- **`parameters`**: Allows users to trigger builds with custom settings (Version, Environment, Skip Tests).
- **`environment`**: Defines global variables like `APP_NAME` and `SERVER_CREDS_ID` to avoid hardcoding values inside stages.

### B. Tools
- **`maven` & `jdk`**: Automatically configures the build environment. Jenkins will ensure the correct version of Maven and Java are available on the agent.

---

## 2. The Stages Explained

### 1Ô∏è‚É£ Initialization
- **Purpose**: Prepares the build.
- **Key Action**: Loads `script.groovy`. This demonstrates **Shared Libraries** principles, allowing you to keep your Jenkinsfile clean by moving complex logic into external files.

### 2Ô∏è‚É£ Build
- **Purpose**: Compiles the Java code and packages it into a JAR file.
- **Command**: `mvn clean package -DskipTests`.
- **Note**: We skip tests here because they have their own dedicated stage for better visibility.

### 3Ô∏è‚É£ Test
- **Purpose**: Ensures code quality and prevents regressions.
- **Condition**: Uses `when { expression { !params.SKIP_TESTS } }` to allow developers to bypass tests if needed (e.g., for urgent hotfixes).
- **Reporting**: The `post { always { junit ... } }` block ensures that test results are visualized in the Jenkins UI as a graph.

### 4Ô∏è‚É£ Deploy
- **Purpose**: Moves the artifact to the server.
- **Security**: Uses `withCredentials` to handle SSH passwords/keys safely. Credentials are never printed in the logs.
- **Approval**: For the `prod` environment, an `input` step is used to require a human to click "Approve" before deployment starts.

---

## 3. Best Practices Implemented

1. **Separation of Concerns**: Logic is split between the `Jenkinsfile` (orchestration) and `script.groovy` (implementation).
2. **Security**: Sensitive data is handled via Jenkins Credentials Store.
3. **Clean Workspace**: The `cleanWs()` step in the `post` block ensures that the build agent doesn't run out of disk space.
4. **Conditional Execution**: Using `when` blocks makes the pipeline "smart" and efficient.

---

## 4. How to use this in Jenkins
1. Create a **Pipeline** job.
2. Under **Pipeline Definition**, select "Pipeline script from SCM".
3. Point it to your Git repository.
4. Ensure your Jenkins has the tools (Maven/JDK) and Credentials configured with the IDs used in the script.

---
*Generated by Antigravity AI*
